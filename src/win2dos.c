#include "cgui/dw_conv.h"

static unsigned char win2dos[128] = {
   '?',
   '',
   '\'',
   'Ÿ',
   '"',
   '.',
   'Å',
   'Î',
   '^',
   '%',
   'S',
   '<',
   'O',
   '',
   'Z',
   '',
   '',
   '\'',
   '\'',
   '"',
   '"',
   '',
   '-',
   '-',
   '~',
   'T',
   's',
   '>',
   'o',
   '',
   'z',
   'Y',
   'ÿ',
   '­',
   '½',
   'œ',
   'Ï',
   '¾',
   'İ',
   'õ',
   'ù',
   '¸',
   '¦',
   '®',
   'ª',
   'ğ',
   '©',
   'î',
   'ø',
   'ñ',
   'ı',
   'ü',
   'ï',
   'æ',
   'ô',
   'ú',
   '÷',
   'û',
   '§',
   '¯',
   '¬',
   '«',
   'ó',
   '¨',
   '·',
   'µ',
   '¶',
   'Ç',
   '',
   '',
   '’',
   '€',
   'Ô',
   '',
   'Ò',
   'Ó',
   'Ş',
   'Ö',
   '×',
   'Ø',
   'Ñ',
   '¥',
   'ã',
   'à',
   'â',
   'å',
   '™',
   '',
   '',
   'ë',
   'é',
   'ê',
   'š',
   'í',
   'è',
   'á',
   '…',
   ' ',
   'ƒ',
   'Æ',
   '„',
   '†',
   '‘',
   '‡',
   'Š',
   '‚',
   'ˆ',
   '‰',
   '',
   '¡',
   'Œ',
   '‹',
   'Ğ',
   '¤',
   '•',
   '¢',
   '“',
   'ä',
   '”',
   'ö',
   '›',
   '—',
   '£',
   '–',
   '',
   'ì',
   'ç',
   '˜'
};

extern char *Win2Dos(const char *src, char *dest)
{
   unsigned char *d;
   const unsigned char *s;

   for (d = (unsigned char *)dest, s = (const unsigned char *)src; *s; d++, s++)
      if (*s & 0x80)
         *d = win2dos[*s - 128];
      else
         *d = *s;
   *d = 0;
   return dest;
}
